(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{146:function(e,t,a){},147:function(e,t,a){e.exports=a.p+"static/media/logo.e4e170ee.png"},174:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(12),l=a(14),c=a(13),s=a(15),o=a(0),i=a.n(o),m=a(9),u=a(27),p=a(63),d=(a(146),a(24)),f=a(6),h=a(66),E=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/ca/",a._logout=function(e){console.log(a.props.auth),a.props.updateUser({loggedin:!1}),a.props.history.push("/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"container d-flex"},i.a.createElement("div",{className:"d-flex flex-grow-1"},i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+""},"Dashboard"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"tasks/"},"New Posts"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"submited_tasks/"},"Submited Posts"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"leaderboard/"},"Leaderboard")),i.a.createElement("div",{className:"username"},this.props.auth.first_name.toUpperCase()," ",this.props.auth.last_name.toUpperCase()),i.a.createElement("div",{className:"username"},h.a[this.props.auth.user_type]),i.a.createElement("div",null,i.a.createElement("button",{onClick:this._logout,className:"navlink logout_btn"},"logout"))))}}]),t}(o.Component),b=Object(f.d)(Object(u.b)(function(e){return e},p),m.g)(E),v=a(65),_=a(77),g=a(52),N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).task_id=Number(a.props.match.params.task_id),a.review_id=Number(a.props.match.params.review_id),a.review=a.props.location.pathname.indexOf("submited_tasks")>0,a.state={error:{},task:{},selected_imgs:[],uploaded_imgs:[]},a._upload_img=function(e,t){e.preventDefault();var n=a.state.selected_imgs.find(function(e){return e.src===t}),r=new FormData,l=new XMLHttpRequest;r.append("proof_by",a.props.auth.id),r.append("proof_pic",n.file),r.append("task",a.task_id),l.addEventListener("load",function(e){console.log(e),a.setState({selected_imgs:a.state.selected_imgs.filter(function(e){return e.src!==t}),uploaded_imgs:[].concat(Object(_.a)(a.state.uploaded_imgs),[JSON.parse(e.target.response)])})}),l.upload.addEventListener("progress",function(e){var r=Math.round(e.loaded/e.total*100);console.log({progress:r}),a.setState({selected_imgs:[].concat(Object(_.a)(a.state.selected_imgs.filter(function(e){return e.src!==t})),[Object(v.a)({},n,{progress:r})])})}),l.open("post",g.a+"/portal/reviews/"),l.setRequestHeader("Authorization",a.props.auth.token),l.send(r)},a._select_img=function(e){e.preventDefault();var t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/x-png,image/gif,image/jpeg",t.click(),t.addEventListener("change",function(e){var t=e.target.files;Array.from(t).forEach(function(e){var t=new FileReader;t.addEventListener("load",function(n){a.setState({selected_imgs:[].concat(Object(_.a)(a.state.selected_imgs),[{src:t.result,file:e}])})}),t.readAsDataURL(e)})})},a._remove_img=function(e,t){e.preventDefault(),a.setState({selected_imgs:a.state.selected_imgs.filter(function(e){return e.src!==t})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.b)().get("/portal/tasks/".concat(this.task_id,"/")).then(function(t){console.log(t.data);var a=t.data,n=new Date(a.created_at);a.created_at=n.toDateString();var r=a.uploaded_imgs.map(function(e){return e.proof_pic=g.a+e.proof_pic,e});e.setState({task:Object(v.a)({},a,{uploaded_imgs:void 0}),uploaded_imgs:r})})}},{key:"render",value:function(){var e=this,t=this.state.error,a=Object.keys(t).map(function(e){return i.a.createElement("div",{className:"text-danger text-center",key:e},e,": ",t[e].join(""))}),n=this.state.task;this.review&&(n=n.task_obj);var r=this.state.selected_imgs.map(function(t,a){return i.a.createElement("div",{className:"upload_img",key:a},i.a.createElement("div",null,i.a.createElement("img",{src:t.src,alt:"selected img shadow"}),i.a.createElement("div",{className:"d-flex justify-content-center"},t.progress>0?i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"progress flex-grow-1"},i.a.createElement("div",{className:"progress-bar progress-bar-striped",role:"progressbar",style:{width:"".concat(t.progress,"%")}})),i.a.createElement("div",{className:"text-center font-weight-bold"},t.progress,"%")):i.a.createElement(o.Fragment,null,i.a.createElement("button",{onClick:function(a){return e._upload_img(a,t.src)},className:"btn btn-success mt-0"},i.a.createElement("i",{className:"fa fa-upload"})," Upload"),i.a.createElement("button",{onClick:function(a){return e._remove_img(a,t.src)},className:"btn btn-danger mt-0"},i.a.createElement("i",{className:"fa fa-times"})," Remove")))))}),l=this.state.uploaded_imgs.map(function(e,t){return i.a.createElement("div",{className:"upload_img",key:t},i.a.createElement("div",null,i.a.createElement("img",{src:e.proof_pic,alt:"selected img shadow"})),i.a.createElement("div",{className:"points"},"Points: ",e.points>-1?e.points:"review pending"))});return r=i.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},r),i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,this.review?"Submitted for review":"Submit for review"),i.a.createElement("div",null)),i.a.createElement("div",{className:"task"},i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Post title:"),i.a.createElement("span",null,n.name)),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Description:"),i.a.createElement("span",null,n.description?n.description:"none")),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Platform:"),i.a.createElement("span",null,n.platform)),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"URL:"),i.a.createElement("span",null,n.url?n.url:"none")),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Create on:"),i.a.createElement("span",null,n.created_at))),i.a.createElement("form",{className:""},a,this.state.error?a:null,i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:this._select_img,className:"btn btn-primary"},i.a.createElement("i",{className:"fa fa-image"})," Select screenshots")),i.a.createElement("div",{className:"my-3 text-center"},i.a.createElement("h3",null,"Selected imgs:"),this.state.selected_imgs.length>0?r:"none"),this.state.uploaded_imgs.length>0?i.a.createElement("div",{className:"my-3 text-center"},i.a.createElement("h3",null,"Uploaded imgs:"),i.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},l)):null))}}]),t}(o.Component),k=Object(u.b)(function(e){return e})(N),y=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"dashbord container"},i.a.createElement("div",{className:"d-flex flex-wrap mt-5"},i.a.createElement("div",{className:""},i.a.createElement("img",{className:"ecell-logo",src:a(147),alt:"ecell logo"})),i.a.createElement("div",{className:"text-center flex-grow-1"},i.a.createElement("h1",{className:"text-center mt-5"},"Campus Ambassador Portal"),i.a.createElement("h3",{className:"text-center mt-3"},"Entrepreneurship Cell, NIT Raipur"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"First name:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.first_name)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"Last name:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.last_name)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"Email:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.email)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"User Type:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},h.a[this.props.auth.user_type])),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"Contact:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.contact)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"OTP Verified:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.verified?i.a.createElement("i",{className:"fa fa-check text-success"}):i.a.createElement("i",{className:"fa fa-times text-danger"}))))}}]),t}(o.Component),O=Object(u.b)(function(e){return e})(y),w=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={tasks:[],loading:!0},a._createTask=function(){a.props.history.push("/caportal/admin/create_task/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.b)().get("/portal/non_submited_tasks/").then(function(t){console.log(t.data);var a=t.data.sort(function(e,t){return t.id-e.id});a=a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),e.setState({tasks:a,loading:!1})})}},{key:"render",value:function(){var e=this.state.tasks.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/ca/tasks/".concat(e.id,"/")},e.name)),i.a.createElement("td",null,e.platform),i.a.createElement("td",null,e.created_at))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Posts List")),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Task name"),i.a.createElement("th",null,"Platform"),i.a.createElement("th",null,"Created on"))),i.a.createElement("tbody",null,e)),this.state.loading?i.a.createElement("h3",{className:"text-center"},"...loading"):null,this.state.loading||0!==this.state.tasks.length?null:i.a.createElement("h3",{className:"text-center"},"no more new posts :)"))}}]),t}(o.Component),x=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={tasks:[],loading:!0},a._fetch=function(){Object(g.b)().get("/portal/submited_tasks/").then(function(e){console.log(e.data);var t=e.data.sort(function(e,t){return t.id-e.id});t=t.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),a.setState({tasks:t,loading:!1})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._fetch()}},{key:"render",value:function(){var e=this.state.tasks.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/ca/tasks/".concat(e.id,"/")},e.name)),i.a.createElement("td",null,e.platform),i.a.createElement("td",null,e.uploaded_imgs.reviewed,"/",e.uploaded_imgs.total),i.a.createElement("td",null,e.uploaded_imgs.points))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Submitted Posts")),i.a.createElement("table",{className:"table table-striped mt-3"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Task name"),i.a.createElement("th",null,"Platform"),i.a.createElement("th",null,"Reviewed"),i.a.createElement("th",null,"Points"))),i.a.createElement("tbody",null,e)),this.state.loading?i.a.createElement("h3",{className:"text-center"},"...loading"):null,this.state.loading||0!==this.state.tasks.length?null:i.a.createElement("h3",{className:"text-center"},"no submitted post available"))}}]),t}(o.Component),j=Object(u.b)(function(e){return e})(x),C=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={users:[],loading:!0},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.b)().get("/portal/ranklist/").then(function(t){var a=t.data.sort(function(e,t){return t.total_points-e.total_points});a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),console.log(a),e.setState({users:a,loading:!1})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this.state.users.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,e.first_name.toUpperCase()," ",e.last_name.toUpperCase()),i.a.createElement("td",null,e.total_points))});return i.a.createElement("div",{className:"ranklist_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Leaderboard")),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Rank"),i.a.createElement("th",null,"Campus Ambassador"),i.a.createElement("th",null,"Points"))),i.a.createElement("tbody",null,e)),this.state.loading?i.a.createElement("h3",{className:"text-center mt-3"},"...loading"):null)}}]),t}(o.Component),S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/ca/",a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(b,null),i.a.createElement(m.d,null,i.a.createElement(m.b,{path:this.base_route+"submited_tasks/",component:j}),i.a.createElement(m.b,{path:this.base_route+"tasks/:task_id/",component:k}),i.a.createElement(m.b,{path:this.base_route+"tasks/",component:w}),i.a.createElement(m.b,{path:this.base_route+"leaderboard/",component:C}),i.a.createElement(m.b,{path:this.base_route+"",component:O})))}}]),t}(o.Component),D=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).user_id=a.props.match.params.user_id,a.state={},a._updateUser=function(e){e.preventDefault(),Object(g.b)().put("/portal/users/".concat(a.user_id,"/"),Object(v.a)({},a.state,{username:a.username.value,first_name:a.first_name.value,last_name:a.last_name.value,user_type:a.user_type.value,applied:a.applied.checked,verified:a.verified.checked})).then(function(e){console.log(e.data),a.props.history.goBack()})},a._deleteUser=function(e){e.preventDefault(),Object(g.b)().delete("/portal/users/".concat(a.user_id,"/")).then(function(e){console.log(e.data),a.props.history.goBack()})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),Object(g.b)().get("/portal/users/".concat(this.user_id,"/")).then(function(t){var a=t.data;e.username.value=a.username,e.first_name.value=a.first_name,e.last_name.value=a.last_name,e.contact.value=a.contact,e.user_type.value=a.user_type,e.applied.checked=a.applied,e.verified.checked=a.verified,e.setState(t.data)})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"User details"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"form-control",placeholder:"Username",ref:function(t){return e.username=t},disabled:!0,type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"First Name:"),i.a.createElement("input",{className:"form-control",placeholder:"First Name",ref:function(t){return e.first_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Last Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Last Name",ref:function(t){return e.last_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Contact:"),i.a.createElement("input",{className:"form-control",placeholder:"contact",ref:function(t){return e.contact=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"User type:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.user_type=t}},i.a.createElement("option",{value:"GST"},"GST"),i.a.createElement("option",{value:"VLT"},"VLT"),i.a.createElement("option",{value:"EXE"},"EXE"),i.a.createElement("option",{value:"MNG"},"MNG"),i.a.createElement("option",{value:"HCO"},"HCO"),i.a.createElement("option",{value:"OCO"},"OCO"),i.a.createElement("option",{value:"CAB"},"CAB"))),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",placeholder:"contact",ref:function(t){return e.applied=t},type:"checkbox"}),i.a.createElement("label",{className:"form-check-label"},"Applied:")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",placeholder:"contact",ref:function(t){return e.verified=t},type:"checkbox"}),i.a.createElement("label",{className:"form-check-label"},"Verified:")),i.a.createElement("div",{className:"text-center mt-3"},i.a.createElement("button",{onClick:this._deleteUser,className:"btn btn-danger"},"Delete"),i.a.createElement("button",{onClick:this._updateUser,className:"btn btn-success"},"Update"))))}}]),t}(o.Component),A=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).user_id=a.props.match.params.user_id,a.state={error:null},a._createUser=function(e){e.preventDefault(),a.setState({error:null}),Object(g.b)().post("/portal/create_user/",{email:a.email.value,first_name:a.first_name.value,last_name:a.last_name.value,user_type:a.user_type.value,contact:a.contact.value,applied:!0,verified:!0,password:a.password.value}).then(function(e){console.log(e.data),a.props.history.goBack()}).catch(function(e){console.log(e.response.data),a.setState({error:e.response.data.detail})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=i.a.createElement("div",{className:"text-danger text-center"},this.state.error);return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"Create user"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},this.state.error?t:null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"First Name:"),i.a.createElement("input",{className:"form-control",placeholder:"First Name",ref:function(t){return e.first_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Last Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Last Name",ref:function(t){return e.last_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Contact:"),i.a.createElement("input",{className:"form-control",placeholder:"Contact",ref:function(t){return e.contact=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"form-control",placeholder:"email",ref:function(t){return e.email=t},type:"email"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Password:"),i.a.createElement("input",{className:"form-control",placeholder:"Password",ref:function(t){return e.password=t},type:"password"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"User type:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.user_type=t}},i.a.createElement("option",{value:"GST"},"GST"),i.a.createElement("option",{value:"VLT"},"VLT"),i.a.createElement("option",{value:"EXE"},"EXE"),i.a.createElement("option",{value:"MNG"},"MNG"),i.a.createElement("option",{value:"HCO"},"HCO"),i.a.createElement("option",{value:"OCO"},"OCO"),i.a.createElement("option",{value:"CAB"},"CAB"))),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:this._createUser,className:"btn btn-success"},"Submit"))))}}]),t}(o.Component),U=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={ecell_users:[],loading:!0},a._to_cab=function(e){Object(g.b)().put("/portal/users/".concat(e.id,"/"),Object(v.a)({},e,{user_type:"CAB"})).then(function(t){var n=a.state.ecell_users,r=n.findIndex(function(t){return t.id===e.id});console.log(r),n[r].user_type="CAB",a.setState({ecell_users:n})})},a._createUser=function(){a.props.history.push("/caportal/admin/create_user/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.b)().get("/portal/users/").then(function(t){e.setState({ecell_users:t.data.sort(function(e,t){return t.id-e.id}),loading:!1})})}},{key:"render",value:function(){var e=this,t=i.a.createElement("div",{className:"text-success"},i.a.createElement("i",{className:"fa fa-check"})),a=i.a.createElement("div",{className:"text-danger"},i.a.createElement("i",{className:"fa fa-times"})),n=this.state.ecell_users.map(function(n,r){return i.a.createElement("tr",{key:r},i.a.createElement("td",null,r+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/admin/users/".concat(n.id,"/")},n.username)),i.a.createElement("td",null,n.verified?t:a),i.a.createElement("td",null,n.applied?t:a),i.a.createElement("td",null,n.otp),i.a.createElement("td",null,n.user_type," ","GST"===n.user_type?i.a.createElement("button",{onClick:function(){return e._to_cab(n)},className:"badge badge-dark"},"to CAB"):null," "))});return i.a.createElement("div",{className:"users_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Users List"),i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{onClick:this._createUser,className:"btn btn-primary"},"create user ",i.a.createElement("i",{className:"fa fa-plus ml-2"})," "))),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"verified"),i.a.createElement("th",null,"Applied"),i.a.createElement("th",null,"otp"),i.a.createElement("th",null,"User Type"))),i.a.createElement("tbody",null,n)),this.state.loading?i.a.createElement("h3",{className:"text-center mt-3"},"...loading"):null)}}]),t}(o.Component),T=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={tasks:[]},a._createTask=function(){a.props.history.push("/caportal/admin/create_task/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.b)().get("/portal/task_list_admin/").then(function(t){var a=t.data.sort(function(e,t){return t.id-e.id});a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),console.log(a),e.setState({tasks:a})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this.state.tasks.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/admin/tasks/".concat(e.id,"/")},e.name)),i.a.createElement("td",null,e.platform),i.a.createElement("td",null,e.pending),i.a.createElement("td",null,e.accepted),i.a.createElement("td",null,e.created_at),i.a.createElement("td",null,i.a.createElement(d.b,{className:"p-1 badge badge-primary",to:"/caportal/admin/review_taskwise/".concat(e.id,"/")},"Review")," "))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Tasks List"),i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{onClick:this._createTask,className:"btn btn-primary"},"create task ",i.a.createElement("i",{className:"fa fa-plus ml-2"})," "))),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Task name"),i.a.createElement("th",null,"Platform"),i.a.createElement("th",null,"Pending"),i.a.createElement("th",null,"Accepted"),i.a.createElement("th",null,"Created on"),i.a.createElement("th",null,"Submissions"))),i.a.createElement("tbody",null,e)))}}]),t}(o.Component),L=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).user_id=a.props.match.params.user_id,a.state={error:{}},a._createTask=function(e){e.preventDefault(),a.setState({error:{}}),Object(g.b)().post("/portal/tasks/",{madeby:a.author.value,name:a.name.value,description:a.description.value,url:a.url.value,platform:a.platform.value}).then(function(e){console.log(e.data),a.props.history.goBack()}).catch(function(e){console.log(e.response.data),a.setState({error:e.response.data})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.author.value="".concat(this.props.auth.first_name.toUpperCase()," ").concat(this.props.auth.last_name.toUpperCase())}},{key:"render",value:function(){var e=this,t=this.state.error;console.log({errors:t});var a=Object.keys(t).map(function(e){return i.a.createElement("div",{className:"text-danger text-center",key:e},e,": ",t[e].join(""))});return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"Create Task"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},a,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Author:"),i.a.createElement("input",{disabled:!0,className:"form-control",placeholder:"First Name",ref:function(t){return e.author=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Task Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Task name",ref:function(t){return e.name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Description:"),i.a.createElement("textarea",{className:"form-control",placeholder:"description",ref:function(t){return e.description=t},rows:"5"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"URL:"),i.a.createElement("input",{className:"form-control",placeholder:"url",ref:function(t){return e.url=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Platform:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.platform=t}},i.a.createElement("option",{value:"facebook"},"facebook"),i.a.createElement("option",{value:"whatsapp"},"whatsapp"),i.a.createElement("option",{value:"youtube"},"youtube"),i.a.createElement("option",{value:"instagram"},"instagram"),i.a.createElement("option",{value:"twitter"},"twitter"),i.a.createElement("option",{value:"linkedin"},"linkedin"))),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:this._createTask,className:"btn btn-success"},"Submit"))))}}]),t}(o.Component),P=Object(u.b)(function(e){return e})(L),B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).task_id=a.props.match.params.task_id,a.state={error:{}},a._updateTask=function(e){e.preventDefault(),Object(g.b)().put("/portal/tasks/".concat(a.task_id,"/"),{madeby:a.author.value,name:a.name.value,description:a.description.value,url:a.url.value,platform:a.platform.value}).then(function(e){console.log(e.data),a.props.history.goBack()})},a._deleteTask=function(e){e.preventDefault(),Object(g.b)().delete("/portal/tasks/".concat(a.task_id,"/")).then(function(e){console.log(e.data),a.props.history.goBack()})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),Object(g.b)().get("/portal/tasks/".concat(this.task_id,"/")).then(function(t){var a=t.data;e.author.value=a.madeby,e.platform.value=a.platform,e.description.value=a.description,e.url.value=a.url,e.name.value=a.name,e.setState(t.data)})}},{key:"render",value:function(){var e=this,t=this.state.error;console.log({errors:t});var a=Object.keys(t).map(function(e){return i.a.createElement("div",{className:"text-danger text-center",key:e},e,": ",t[e].join(""))});return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"Task detail"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},a,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Author:"),i.a.createElement("input",{disabled:!0,className:"form-control",placeholder:"First Name",ref:function(t){return e.author=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Task Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Task name",ref:function(t){return e.name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Description:"),i.a.createElement("textarea",{className:"form-control",placeholder:"description",ref:function(t){return e.description=t},rows:"5"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"URL:"),i.a.createElement("input",{className:"form-control",placeholder:"url",ref:function(t){return e.url=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Platform:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.platform=t}},i.a.createElement("option",{value:"facebook"},"facebook"),i.a.createElement("option",{value:"whatsapp"},"whatsapp"),i.a.createElement("option",{value:"youtube"},"youtube"),i.a.createElement("option",{value:"instagram"},"instagram"),i.a.createElement("option",{value:"twitter"},"twitter"),i.a.createElement("option",{value:"linkedin"},"linkedin"))),i.a.createElement("div",{className:"text-center mt-3"},i.a.createElement("button",{onClick:this._deleteTask,className:"btn btn-danger"},"Delete"),i.a.createElement("button",{onClick:this._updateTask,className:"btn btn-success"},"Update"))))}}]),t}(o.Component),M=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/admin/",a._logout=function(e){console.log(a.props.auth),a.props.updateUser({loggedin:!1}),a.props.history.push("/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"container d-flex"},i.a.createElement("div",{className:"d-flex flex-grow-1"},i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+""},"Dashboard"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"users/"},"EcellUsers"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"tasks/"},"Tasks"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"leaderboard/"},"Leaderboard")),i.a.createElement("div",{className:"username"},this.props.auth.first_name.toUpperCase()," ",this.props.auth.last_name.toUpperCase()),i.a.createElement("div",{className:"username"},h.a[this.props.auth.user_type]),i.a.createElement("div",null,i.a.createElement("button",{onClick:this._logout,className:"navlink logout_btn"},"logout"))))}}]),t}(o.Component),R=Object(f.d)(Object(u.b)(function(e){return e},p),m.g)(M),G=a(148),F=a.n(G),I=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).task_id=a.props.match.params.task_id,a.state={reviews:[],status:"pending",modal_open:!1,modal_review_id:0},a._accept_review=function(e,t,n){e.preventDefault(),a.setState({modal_open:!1});var r=document.querySelector(n).value;"accepted"===a.state.status&&(r=prompt("plz enter new points for the post:"),console.log(r)),r>10||r<0||""===r||null===r?alert("points can be only within 0 and 10"):(r=Number(r),Object(g.b)().patch("/portal/reviews/".concat(t,"/"),{points:r}).then(function(e){var n=a.state.reviews,l=n.findIndex(function(e){return e.id===t});n[l].points=r,a.setState({reviews:n})}))},a._closeModal=function(){a.setState({modal_open:!1})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.status),Object(g.b)().get("/portal/reviews/?task=".concat(this.task_id)).then(function(t){var a=t.data.sort(function(e,t){return t.id-e.id});console.log(a),a=a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),e.setState({reviews:a})})}},{key:"render",value:function(){var e=this,t=this.state.reviews.filter(function(e){return-1===e.points}).length,a=this.state.reviews.filter(function(e){return-1!==e.points}).length,n=this.state.reviews.find(function(t){return t.id===e.state.modal_review_id}),r=this.state.reviews.filter(function(e){return-1===e.points});"accepted"===this.state.status&&(r=this.state.reviews.filter(function(e){return-1!==e.points}));var l=r.map(function(t,a){return i.a.createElement("div",{className:"review shadow",key:a},i.a.createElement("img",{src:t.proof_pic,onClick:function(){return e.setState({modal_open:!0,modal_review_id:t.id})},alt:""}),i.a.createElement("div",{className:"d-flex user_details justify-content-center"},i.a.createElement("span",null,t.proof_by_name),i.a.createElement("span",null,t.proof_by_email)),i.a.createElement("form",{className:"text-center btns"},"accepted"===e.state.status?i.a.createElement("input",{type:"number",className:"text-center points-normal-".concat(t.id),disabled:!0,value:t.points,placeholder:"points"}):i.a.createElement("input",{type:"number",className:"text-center points-normal-".concat(t.id),placeholder:"points"}),i.a.createElement("button",{onClick:function(a){return e._accept_review(a,t.id,".points-normal-".concat(t.id))},className:"btn m-0 mx-2 btn-success"},"accepted"===e.state.status?i.a.createElement("i",{className:"fa fa-edit"}):i.a.createElement("i",{className:"fa fa-check"}))))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("button",{onClick:function(){return e.props.history.goBack()},className:"btn btn-warning"},"go back"),i.a.createElement("h2",{className:" flex-grow-1 text-center"},this.state.status[0].toUpperCase(),this.state.status.slice(1)," Posts")),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:function(){return e.setState({status:"pending"})},className:"mx-2 btn btn-primary"},"Pending: ",t),i.a.createElement("button",{onClick:function(){return e.setState({status:"accepted"})},className:"mx-2 btn btn-success"},"Accepted: ",a)),i.a.createElement("div",{className:"reviews"},l),this.state.modal_open?i.a.createElement(F.a,{isOpen:this.state.modal_open,onRequestClose:this._closeModal,shouldCloseOnOverlayClick:!0,contentLabel:"review_modal"},i.a.createElement("div",{className:"review modal_review"},i.a.createElement("div",{className:"d-flex user_details justify-content-center"},i.a.createElement("span",null,n.proof_by_name),i.a.createElement("span",null,n.proof_by_email)),i.a.createElement("form",{className:"text-center btns"},"accepted"===this.state.status?i.a.createElement("input",{type:"number",className:"text-center points-modal-".concat(n.id),disabled:!0,value:n.points,placeholder:"points"}):i.a.createElement("input",{type:"number",className:"text-center points-modal-".concat(n.id),placeholder:"points"}),i.a.createElement("button",{onClick:function(t){return e._accept_review(t,n.id,".points-modal-".concat(n.id))},className:"btn m-0 mx-2 btn-success"},"accepted"===this.state.status?i.a.createElement("i",{className:"fa fa-edit"}):i.a.createElement("i",{className:"fa fa-check"}))),i.a.createElement("img",{src:n.proof_pic,onClick:function(){return e.setState({modal_open:!0,modal_review_id:n.id})},alt:""}))):null)}}]),t}(o.Component),J=Object(u.b)(function(e){return e})(I),H=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/admin/",a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(R,null),i.a.createElement(m.d,null,i.a.createElement(m.b,{path:this.base_route+"review_taskwise/:task_id/",component:J}),i.a.createElement(m.b,{path:this.base_route+"tasks/:task_id",component:B}),i.a.createElement(m.b,{path:this.base_route+"create_task/",component:P}),i.a.createElement(m.b,{path:this.base_route+"tasks/",component:T}),i.a.createElement(m.b,{path:this.base_route+"users/:user_id",component:D}),i.a.createElement(m.b,{path:this.base_route+"create_user/",component:A}),i.a.createElement(m.b,{path:this.base_route+"users/",component:U}),i.a.createElement(m.b,{path:this.base_route+"leaderboard/",component:C}),i.a.createElement(m.b,{path:this.base_route+"",component:O})))}}]),t}(o.Component);a.d(t,"ca_portal",function(){return V});var V=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth;if(console.log("gaurd comp"),e.loggedin)if("GST"===e.user_type)alert("You are not CA or admin yet!"),this.props.history.push("/caportal_info");else if("CAB"===e.user_type){if(this.props.location.pathname.indexOf("/ca/")>0)return;this.props.history.push("/caportal/ca")}else{if(this.props.location.pathname.indexOf("/admin/")>0)return;this.props.history.push("/caportal/admin")}else alert("Please login to continue"),this.props.history.push("/caportal_info")}},{key:"render",value:function(){return i.a.createElement("div",{className:"caportal-wrapper"},i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/caportal/ca",component:S}),i.a.createElement(m.b,{path:"/caportal/admin",component:H})))}}]),t}(o.Component);t.default=Object(u.b)(function(e){return e},p)(V)},52:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(80),r=a.n(n),l=a(36),c="http://localhost:8000";c="",t.b=function(){var e=null,t=l.store.getState().auth;return t&&(e=t.token),r.a.create({baseURL:c,headers:{Authorization:e,Access:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnQiOiJhbmRyb2lkIiwib3JnYW5pemF0aW9uIjoiRUNlbGwifQ.H2aaDJuOxK44D2kwRCWwv9s5rzJGCNYKT3thtQqN-hQ"}})}},63:function(e,t,a){"use strict";a.r(t),a.d(t,"updateUser",function(){return n});var n=function(e){return function(t){t({type:"update_user",payload:e})}}},66:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={GST:"Guest",VLT:"Voluteer",EXE:"Executive",MNG:"Manager",HCO:"Head Co-ordinator",OCO:"Overall Co-ordinator",CAB:"Campus Ambassador"}}}]);
//# sourceMappingURL=23.ae8aa537.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{145:function(e,t,a){},146:function(e,t,a){e.exports=a.p+"static/media/logo.e4e170ee.png"},172:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(12),l=a(14),c=a(13),s=a(15),o=a(0),i=a.n(o),m=a(9),u=a(27),p=a(63),d=(a(145),a(24)),f=a(6),h=a(66),b=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/ca/",a._logout=function(e){console.log(a.props.auth),a.props.updateUser({loggedin:!1}),a.props.history.push("/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"container d-flex"},i.a.createElement("div",{className:"d-flex flex-grow-1"},i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+""},"Dashboard"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"tasks/"},"New Posts"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"submited_tasks/"},"Submited Posts")),i.a.createElement("div",{className:"username"},this.props.auth.first_name.toUpperCase()," ",this.props.auth.last_name.toUpperCase()),i.a.createElement("div",{className:"username"},h.a[this.props.auth.user_type]),i.a.createElement("div",null,i.a.createElement("button",{onClick:this._logout,className:"navlink logout_btn"},"logout"))))}}]),t}(o.Component),v=Object(f.d)(Object(u.b)(function(e){return e},p),m.g)(b),E=a(52),_=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).task_id=Number(a.props.match.params.task_id),a.review_id=Number(a.props.match.params.review_id),a.review=a.props.location.pathname.indexOf("submited_tasks")>0,a.state={error:{},task:{},up_percentage:0},a._createSubmitReview=function(e){e.preventDefault();var t=new FormData,n=new XMLHttpRequest;t.append("proof_by",a.props.auth.id),t.append("proof_pic",a.state.proof_pic),t.append("status","pending");var r=a.task_id;a.review&&(r=a.state.task.task),console.log({task_id:r}),t.append("task",r),n.addEventListener("load",function(e){a.props.history.goBack()}),n.upload.addEventListener("progress",function(e){var t=Math.round(e.loaded/e.total*100);a.setState({up_percentage:t})});var l=E.a+"/portal/submit_task/";a.review&&(l=E.a+"/portal/submit_task/".concat(a.review_id,"/")),n.responseType="json";var c="post";a.review&&(c="put"),n.open(c,l),n.setRequestHeader("Authorization",a.props.auth.token),n.send(t)},a._select_img=function(e){e.preventDefault();var t=document.createElement("input");t.type="file",t.accept="image/x-png,image/gif,image/jpeg",t.click(),t.addEventListener("change",function(e){var t=e.target.files[0],n=new FileReader;n.addEventListener("load",function(e){a.setState({imgsrc:n.result,proof_pic:t})}),n.readAsDataURL(t)})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="/portal/tasks/".concat(this.task_id,"/");this.review&&(t="/portal/submit_task/".concat(this.review_id,"/")),Object(E.b)().get(t).then(function(t){console.log(t.data);var a=t.data,n=new Date(a.created_at);a.created_at=n.toDateString(),e.setState({task:a})})}},{key:"render",value:function(){var e=this,t=this.state.error,a=Object.keys(t).map(function(e){return i.a.createElement("div",{className:"text-danger text-center",key:e},e,": ",t[e].join(""))}),n=this.state.task;this.review&&(n=n.task_obj),"undefined"===typeof n&&(n={});var r=this.state.up_percentage>0?null:i.a.createElement("button",{onClick:this._select_img,className:"btn btn-primary"},i.a.createElement("i",{className:"fa fa-image"})," Select screenshot");this.review&&"rejected"!=this.state.task.status&&(r=null);var l=i.a.createElement("div",null,i.a.createElement("img",{src:this.state.imgsrc,alt:"selected_img",style:{width:"300px"}}),i.a.createElement("div",{className:"progress"},i.a.createElement("div",{className:"progress-bar progress-bar-striped",role:"progressbar",style:{width:"".concat(this.state.up_percentage,"%")}})),i.a.createElement("div",{className:"font-weight-bold"},this.state.up_percentage,"%"));return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,this.review?"Submitted for review":"Submit for review"),i.a.createElement("div",null)),i.a.createElement("div",{className:"task"},i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Post title:"),i.a.createElement("span",null,n.name)),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Description:"),i.a.createElement("span",null,n.description?n.description:"none")),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Platform:"),i.a.createElement("span",null,n.platform)),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"URL:"),i.a.createElement("span",null,n.url?n.url:"none")),i.a.createElement("div",null,i.a.createElement("span",{className:"font-weight-bold mr-3"},"Create on:"),i.a.createElement("span",null,n.created_at))),i.a.createElement("form",{className:""},a,this.state.error?a:null,i.a.createElement("div",{className:"text-center"},r,this.state.imgsrc?l:null),this.state.up_percentage>0||!this.state.imgsrc?null:i.a.createElement("div",{className:"text-center mt-3"},i.a.createElement("button",{onClick:this._createSubmitReview,className:"btn btn-success"},"Submit"))))}}]),t}(o.Component),N=Object(u.b)(function(e){return e})(_),k=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"dashbord container"},i.a.createElement("div",{className:"d-flex flex-wrap mt-5"},i.a.createElement("div",{className:""},i.a.createElement("img",{className:"ecell-logo",src:a(146),alt:"ecell logo"})),i.a.createElement("div",{className:"text-center flex-grow-1"},i.a.createElement("h1",{className:"text-center mt-5"},"Campus Ambassador Portal"),i.a.createElement("h3",{className:"text-center mt-3"},"Entrepreneurship Cell, NIT Raipur"))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"First name:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.first_name)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"Last name:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.last_name)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"Email:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.email)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"User Type:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},h.a[this.props.auth.user_type])),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"Contact:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.contact)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6 font-weight-bold text-center text-md-right"},"OTP Verified:"),i.a.createElement("div",{className:"col-md-6 text-center text-md-left"},this.props.auth.verified?i.a.createElement("i",{className:"fa fa-check text-success"}):i.a.createElement("i",{className:"fa fa-times text-danger"}))))}}]),t}(o.Component),g=Object(u.b)(function(e){return e})(k),y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={tasks:[],loading:!0},a._createTask=function(){a.props.history.push("/caportal/admin/create_task/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(E.b)().get("/portal/non_submited_tasks/").then(function(t){console.log(t.data);var a=t.data.sort(function(e,t){return t.id-e.id});a=a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),e.setState({tasks:a,loading:!1})})}},{key:"render",value:function(){var e=this.state.tasks.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/ca/tasks/".concat(e.id,"/")},e.name)),i.a.createElement("td",null,e.platform),i.a.createElement("td",null,e.created_at))});return this.state.loading?e=i.a.createElement("h3",{className:"text-center"},"...loading"):this.state.loading||0!==this.state.tasks.length||(e=i.a.createElement("h3",{className:"text-center"},"no new posts :)")),i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Posts List")),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Task name"),i.a.createElement("th",null,"Platform"),i.a.createElement("th",null,"Created on"))),i.a.createElement("tbody",null,e)))}}]),t}(o.Component),w=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={reviews:[],status:"total"},a._createTask=function(){a.props.history.push("/caportal/admin/create_task/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.status),Object(E.b)().get("/portal/submit_task/?proof_by=".concat(this.props.auth.id)).then(function(t){console.log(t.data);var a=t.data.sort(function(e,t){return t.id-e.id});a=a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),e.setState({reviews:a})})}},{key:"render",value:function(){var e=this,t=this.state.reviews.length,a=this.state.reviews.filter(function(e){return"pending"===e.status}).length,n=this.state.reviews.filter(function(e){return"accepted"===e.status}).length,r=this.state.reviews.filter(function(e){return"rejected"===e.status}).length,l=this.state.reviews;"total"!==this.state.status&&(l=l.filter(function(t){return t.status===e.state.status}),console.log(l));var c=l.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/ca/submited_tasks/".concat(e.id,"/")},e.task_obj.name)),i.a.createElement("td",null,e.task_obj.platform),i.a.createElement("td",null,e.created_at))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},this.state.status[0].toUpperCase(),this.state.status.slice(1)," Posts")),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:function(){return e.setState({status:"total"})},className:"mx-2 btn btn-dark"},"Total: ",t),i.a.createElement("button",{onClick:function(){return e.setState({status:"pending"})},className:"mx-2 btn btn-primary"},"Pending: ",a),i.a.createElement("button",{onClick:function(){return e.setState({status:"accepted"})},className:"mx-2 btn btn-success"},"Accepted: ",n),i.a.createElement("button",{onClick:function(){return e.setState({status:"rejected"})},className:"mx-2 btn btn-danger"},"Rejected: ",r)),i.a.createElement("table",{className:"table table-striped mt-3"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Task name"),i.a.createElement("th",null,"Platform"),i.a.createElement("th",null,"Created on"))),i.a.createElement("tbody",null,c)))}}]),t}(o.Component),j=Object(u.b)(function(e){return e})(w),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/ca/",a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(v,null),i.a.createElement(m.d,null,i.a.createElement(m.b,{path:this.base_route+"submited_tasks/:review_id/",component:N}),i.a.createElement(m.b,{path:this.base_route+"submited_tasks/",component:j}),i.a.createElement(m.b,{path:this.base_route+"tasks/:task_id/",component:N}),i.a.createElement(m.b,{path:this.base_route+"tasks/",component:y}),i.a.createElement(m.b,{path:this.base_route+"",component:g})))}}]),t}(o.Component),x=a(65),C=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).user_id=a.props.match.params.user_id,a.state={},a._updateUser=function(e){e.preventDefault(),Object(E.b)().put("/portal/users/".concat(a.user_id,"/"),Object(x.a)({},a.state,{username:a.username.value,first_name:a.first_name.value,last_name:a.last_name.value,user_type:a.user_type.value,applied:a.applied.checked,verified:a.verified.checked})).then(function(e){console.log(e.data),a.props.history.goBack()})},a._deleteUser=function(e){e.preventDefault(),Object(E.b)().delete("/portal/users/".concat(a.user_id,"/")).then(function(e){console.log(e.data),a.props.history.goBack()})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),Object(E.b)().get("/portal/users/".concat(this.user_id,"/")).then(function(t){var a=t.data;e.username.value=a.username,e.first_name.value=a.first_name,e.last_name.value=a.last_name,e.contact.value=a.contact,e.user_type.value=a.user_type,e.applied.checked=a.applied,e.verified.checked=a.verified,e.setState(t.data)})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"User details"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"form-control",placeholder:"Username",ref:function(t){return e.username=t},disabled:!0,type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"First Name:"),i.a.createElement("input",{className:"form-control",placeholder:"First Name",ref:function(t){return e.first_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Last Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Last Name",ref:function(t){return e.last_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Contact:"),i.a.createElement("input",{className:"form-control",placeholder:"contact",ref:function(t){return e.contact=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"User type:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.user_type=t}},i.a.createElement("option",{value:"GST"},"GST"),i.a.createElement("option",{value:"VLT"},"VLT"),i.a.createElement("option",{value:"EXE"},"EXE"),i.a.createElement("option",{value:"MNG"},"MNG"),i.a.createElement("option",{value:"HCO"},"HCO"),i.a.createElement("option",{value:"OCO"},"OCO"),i.a.createElement("option",{value:"CAB"},"CAB"))),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",placeholder:"contact",ref:function(t){return e.applied=t},type:"checkbox"}),i.a.createElement("label",{className:"form-check-label"},"Applied:")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",placeholder:"contact",ref:function(t){return e.verified=t},type:"checkbox"}),i.a.createElement("label",{className:"form-check-label"},"Verified:")),i.a.createElement("div",{className:"text-center mt-3"},i.a.createElement("button",{onClick:this._deleteUser,className:"btn btn-danger"},"Delete"),i.a.createElement("button",{onClick:this._updateUser,className:"btn btn-success"},"Update"))))}}]),t}(o.Component),S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).user_id=a.props.match.params.user_id,a.state={error:null},a._createUser=function(e){e.preventDefault(),a.setState({error:null}),Object(E.b)().post("/portal/create_user/",{email:a.email.value,first_name:a.first_name.value,last_name:a.last_name.value,user_type:a.user_type.value,contact:a.contact.value,applied:!0,verified:!0,password:a.password.value}).then(function(e){console.log(e.data),a.props.history.goBack()}).catch(function(e){console.log(e.response.data),a.setState({error:e.response.data.detail})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=i.a.createElement("div",{className:"text-danger text-center"},this.state.error);return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"Create user"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},this.state.error?t:null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"First Name:"),i.a.createElement("input",{className:"form-control",placeholder:"First Name",ref:function(t){return e.first_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Last Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Last Name",ref:function(t){return e.last_name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Contact:"),i.a.createElement("input",{className:"form-control",placeholder:"Contact",ref:function(t){return e.contact=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"form-control",placeholder:"email",ref:function(t){return e.email=t},type:"email"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Password:"),i.a.createElement("input",{className:"form-control",placeholder:"Password",ref:function(t){return e.password=t},type:"password"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"User type:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.user_type=t}},i.a.createElement("option",{value:"GST"},"GST"),i.a.createElement("option",{value:"VLT"},"VLT"),i.a.createElement("option",{value:"EXE"},"EXE"),i.a.createElement("option",{value:"MNG"},"MNG"),i.a.createElement("option",{value:"HCO"},"HCO"),i.a.createElement("option",{value:"OCO"},"OCO"),i.a.createElement("option",{value:"CAB"},"CAB"))),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:this._createUser,className:"btn btn-success"},"Submit"))))}}]),t}(o.Component),T=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={ecell_users:[]},a._to_cab=function(e){Object(E.b)().put("/portal/users/".concat(e.id,"/"),Object(x.a)({},e,{user_type:"CAB"})).then(function(t){var n=a.state.ecell_users,r=n.findIndex(function(t){return t.id===e.id});console.log(r),n[r].user_type="CAB",a.setState({ecell_users:n})})},a._createUser=function(){a.props.history.push("/caportal/admin/create_user/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(E.b)().get("/portal/users/").then(function(t){e.setState({ecell_users:t.data.sort(function(e,t){return t.id-e.id})})})}},{key:"render",value:function(){var e=this,t=i.a.createElement("div",{className:"text-success"},i.a.createElement("i",{className:"fa fa-check"})),a=i.a.createElement("div",{className:"text-danger"},i.a.createElement("i",{className:"fa fa-times"})),n=this.state.ecell_users.map(function(n,r){return i.a.createElement("tr",{key:r},i.a.createElement("td",null,r+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/admin/users/".concat(n.id,"/")},n.username)),i.a.createElement("td",null,n.verified?t:a),i.a.createElement("td",null,n.applied?t:a),i.a.createElement("td",null,n.otp),i.a.createElement("td",null,n.user_type," ","GST"===n.user_type?i.a.createElement("button",{onClick:function(){return e._to_cab(n)},className:"badge badge-dark"},"to CAB"):null," "))});return i.a.createElement("div",{className:"users_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Users List"),i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{onClick:this._createUser,className:"btn btn-primary"},"create user ",i.a.createElement("i",{className:"fa fa-plus ml-2"})," "))),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"verified"),i.a.createElement("th",null,"Applied"),i.a.createElement("th",null,"otp"),i.a.createElement("th",null,"User Type"))),i.a.createElement("tbody",null,n)))}}]),t}(o.Component),D=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={tasks:[]},a._createTask=function(){a.props.history.push("/caportal/admin/create_task/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(E.b)().get("/portal/tasks/").then(function(t){var a=t.data.sort(function(e,t){return t.id-e.id});a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),e.setState({tasks:a})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this.state.tasks.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t+1),i.a.createElement("td",null,i.a.createElement(d.b,{className:"detail_link",to:"/caportal/admin/tasks/".concat(e.id,"/")},e.name)),i.a.createElement("td",null,e.platform),i.a.createElement("td",null,e.pending),i.a.createElement("td",null,e.accepted),i.a.createElement("td",null,e.rejected),i.a.createElement("td",null,e.created_at),i.a.createElement("td",null,i.a.createElement(d.b,{className:"p-1 badge badge-primary",to:"/caportal/admin/review_taskwise/".concat(e.id,"/")},"Review")," "))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("h2",{className:" flex-grow-1 text-center"},"Tasks List"),i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{onClick:this._createTask,className:"btn btn-primary"},"create task ",i.a.createElement("i",{className:"fa fa-plus ml-2"})," "))),i.a.createElement("table",{className:"table table-striped"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Task name"),i.a.createElement("th",null,"Platform"),i.a.createElement("th",null,"Pending"),i.a.createElement("th",null,"Accepted"),i.a.createElement("th",null,"Rejected"),i.a.createElement("th",null,"Created on"),i.a.createElement("th",null,"Submissions"))),i.a.createElement("tbody",null,e)))}}]),t}(o.Component),A=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).user_id=a.props.match.params.user_id,a.state={error:{}},a._createTask=function(e){e.preventDefault(),a.setState({error:{}}),Object(E.b)().post("/portal/tasks/",{madeby:a.author.value,name:a.name.value,description:a.description.value,url:a.url.value,platform:a.platform.value}).then(function(e){console.log(e.data),a.props.history.goBack()}).catch(function(e){console.log(e.response.data),a.setState({error:e.response.data})})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.author.value="".concat(this.props.auth.first_name.toUpperCase()," ").concat(this.props.auth.last_name.toUpperCase())}},{key:"render",value:function(){var e=this,t=this.state.error;console.log({errors:t});var a=Object.keys(t).map(function(e){return i.a.createElement("div",{className:"text-danger text-center",key:e},e,": ",t[e].join(""))});return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"Create Task"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},a,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Author:"),i.a.createElement("input",{disabled:!0,className:"form-control",placeholder:"First Name",ref:function(t){return e.author=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Task Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Task name",ref:function(t){return e.name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Description:"),i.a.createElement("textarea",{className:"form-control",placeholder:"description",ref:function(t){return e.description=t},rows:"5"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"URL:"),i.a.createElement("input",{className:"form-control",placeholder:"url",ref:function(t){return e.url=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Platform:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.platform=t}},i.a.createElement("option",{value:"facebook"},"facebook"),i.a.createElement("option",{value:"whatsapp"},"whatsapp"),i.a.createElement("option",{value:"youtube"},"youtube"),i.a.createElement("option",{value:"instagram"},"instagram"),i.a.createElement("option",{value:"twitter"},"twitter"),i.a.createElement("option",{value:"linkedin"},"linkedin"))),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:this._createTask,className:"btn btn-success"},"Submit"))))}}]),t}(o.Component),U=Object(u.b)(function(e){return e})(A),L=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).task_id=a.props.match.params.task_id,a.state={error:{}},a._updateTask=function(e){e.preventDefault(),Object(E.b)().put("/portal/tasks/".concat(a.task_id,"/"),{madeby:a.author.value,name:a.name.value,description:a.description.value,url:a.url.value,platform:a.platform.value}).then(function(e){console.log(e.data),a.props.history.goBack()})},a._deleteTask=function(e){e.preventDefault(),Object(E.b)().delete("/portal/tasks/".concat(a.task_id,"/")).then(function(e){console.log(e.data),a.props.history.goBack()})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),Object(E.b)().get("/portal/tasks/".concat(this.task_id,"/")).then(function(t){var a=t.data;e.author.value=a.madeby,e.platform.value=a.platform,e.description.value=a.description,e.url.value=a.url,e.name.value=a.name,e.setState(t.data)})}},{key:"render",value:function(){var e=this,t=this.state.error;console.log({errors:t});var a=Object.keys(t).map(function(e){return i.a.createElement("div",{className:"text-danger text-center",key:e},e,": ",t[e].join(""))});return i.a.createElement("div",{className:"user_detail container"},i.a.createElement("div",{className:"d-flex my-5 justify-content-between"},i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.props.history.goBack()}},"go back"),i.a.createElement("h2",null,"User details"),i.a.createElement("div",null)),i.a.createElement("form",{className:""},a,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Author:"),i.a.createElement("input",{disabled:!0,className:"form-control",placeholder:"First Name",ref:function(t){return e.author=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Task Name:"),i.a.createElement("input",{className:"form-control",placeholder:"Task name",ref:function(t){return e.name=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Description:"),i.a.createElement("textarea",{className:"form-control",placeholder:"description",ref:function(t){return e.description=t},rows:"5"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"URL:"),i.a.createElement("input",{className:"form-control",placeholder:"url",ref:function(t){return e.url=t},type:"text"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Platform:"),i.a.createElement("select",{className:"form-control",ref:function(t){return e.platform=t}},i.a.createElement("option",{value:"facebook"},"facebook"),i.a.createElement("option",{value:"whatsapp"},"whatsapp"),i.a.createElement("option",{value:"youtube"},"youtube"),i.a.createElement("option",{value:"instagram"},"instagram"),i.a.createElement("option",{value:"twitter"},"twitter"),i.a.createElement("option",{value:"linkedin"},"linkedin"))),i.a.createElement("div",{className:"text-center mt-3"},i.a.createElement("button",{onClick:this._deleteTask,className:"btn btn-danger"},"Delete"),i.a.createElement("button",{onClick:this._updateTask,className:"btn btn-success"},"Update"))))}}]),t}(o.Component),B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/admin/",a._logout=function(e){console.log(a.props.auth),a.props.updateUser({loggedin:!1}),a.props.history.push("/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"container d-flex"},i.a.createElement("div",{className:"d-flex flex-grow-1"},i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+""},"Dashboard"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"users/"},"EcellUsers"),i.a.createElement(d.c,{activeClassName:"active_navlink",exact:!0,className:"navlink",to:this.base_route+"tasks/"},"Tasks")),i.a.createElement("div",{className:"username"},this.props.auth.first_name.toUpperCase()," ",this.props.auth.last_name.toUpperCase()),i.a.createElement("div",{className:"username"},h.a[this.props.auth.user_type]),i.a.createElement("div",null,i.a.createElement("button",{onClick:this._logout,className:"navlink logout_btn"},"logout"))))}}]),t}(o.Component),M=Object(f.d)(Object(u.b)(function(e){return e},p),m.g)(B),P=a(147),R=a.n(P),G=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).task_id=a.props.match.params.task_id,a.state={reviews:[],status:"pending",modal_open:!1,modal_review_id:0},a._accept_review=function(e){a.setState({modal_open:!1});var t=e.target.parentElement;t.classList.contains("btns")||(t=t.parentElement);var n=Number(t.dataset.reviewId);Object(E.b)().post("/portal/submit_task_score/",{review_id:n,status:"accepted"}).then(function(e){var t=a.state.reviews,r=t.findIndex(function(e){return e.id===n});t[r].status="accepted",a.setState({reviews:t})})},a._reject_review=function(e){a.setState({modal_open:!1});var t=e.target.parentElement;t.classList.contains("btns")||(t=t.parentElement);var n=Number(t.dataset.reviewId);Object(E.b)().post("/portal/submit_task_score/",{review_id:n,status:"rejected"}).then(function(e){var t=a.state.reviews,r=t.findIndex(function(e){return e.id===n});t[r].status="rejected",a.setState({reviews:t})})},a._closeModal=function(){a.setState({modal_open:!1})},a._createTask=function(){a.props.history.push("/caportal/admin/create_task/")},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.status),Object(E.b)().get("/portal/submit_task/?task=".concat(this.task_id)).then(function(t){console.log(t.data);var a=t.data.sort(function(e,t){return t.id-e.id});console.log({reviews:a}),a=a.map(function(e){var t=new Date(e.created_at);return e.created_at=t.toDateString(),e}),e.setState({reviews:a})})}},{key:"render",value:function(){var e=this,t=(this.state.reviews.length,this.state.reviews.filter(function(e){return"pending"===e.status}).length),a=this.state.reviews.filter(function(e){return"accepted"===e.status}).length,n=this.state.reviews.filter(function(e){return"rejected"===e.status}).length,r=this.state.reviews.filter(function(t){return t.status===e.state.status}),l=this.state.reviews.find(function(t){return t.id===e.state.modal_review_id}),c=r.map(function(t,a){return i.a.createElement("div",{className:"review shadow",key:a},i.a.createElement("img",{src:t.proof_pic,onClick:function(){return e.setState({modal_open:!0,modal_review_id:t.id})},alt:""}),i.a.createElement("div",{className:"d-flex user_details justify-content-center"},i.a.createElement("span",null,t.proof_by_name),i.a.createElement("span",null,t.proof_by_email)),i.a.createElement("div",{className:"text-center btns","data-review-id":t.id},i.a.createElement("button",{onClick:e._accept_review,className:"btn m-0 mx-2 btn-success"},i.a.createElement("i",{className:"fa fa-check"})),i.a.createElement("button",{onClick:e._reject_review,className:"btn m-0 mx-2 btn-danger"},i.a.createElement("i",{className:"fa fa-times"}))))});return i.a.createElement("div",{className:"tasks_list container"},i.a.createElement("div",{className:"d-flex my-4"},i.a.createElement("button",{onClick:function(){return e.props.history.goBack()},className:"btn btn-warning"},"go back"),i.a.createElement("h2",{className:" flex-grow-1 text-center"},this.state.status[0].toUpperCase(),this.state.status.slice(1)," Posts")),i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{onClick:function(){return e.setState({status:"pending"})},className:"mx-2 btn btn-primary"},"Pending: ",t),i.a.createElement("button",{onClick:function(){return e.setState({status:"accepted"})},className:"mx-2 btn btn-success"},"Accepted: ",a),i.a.createElement("button",{onClick:function(){return e.setState({status:"rejected"})},className:"mx-2 btn btn-danger"},"Rejected: ",n)),i.a.createElement("div",{className:"reviews"},c),this.state.modal_open?i.a.createElement(R.a,{isOpen:this.state.modal_open,onRequestClose:this._closeModal,shouldCloseOnOverlayClick:!0,contentLabel:"review_modal"},i.a.createElement("div",{className:"review modal_review"},i.a.createElement("div",{className:"d-flex user_details justify-content-center"},i.a.createElement("span",null,l.proof_by_name),i.a.createElement("span",null,l.proof_by_email)),i.a.createElement("div",{className:"text-center btns","data-review-id":l.id},i.a.createElement("button",{onClick:this._accept_review,className:"btn m-0 px-3 py-2 mx-2 btn-success"},i.a.createElement("i",{className:"fa fa-check"})),i.a.createElement("button",{onClick:this._reject_review,className:"btn m-0 px-3 py-2 mx-2 btn-danger"},i.a.createElement("i",{className:"fa fa-times"}))),i.a.createElement("img",{src:l.proof_pic,onClick:this._closeModal,alt:""}))):null)}}]),t}(o.Component),I=Object(u.b)(function(e){return e})(G),F=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).base_route="/caportal/admin/",a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(M,null),i.a.createElement(m.d,null,i.a.createElement(m.b,{path:this.base_route+"review_taskwise/:task_id/",component:I}),i.a.createElement(m.b,{path:this.base_route+"tasks/:task_id",component:L}),i.a.createElement(m.b,{path:this.base_route+"create_task/",component:U}),i.a.createElement(m.b,{path:this.base_route+"tasks/",component:D}),i.a.createElement(m.b,{path:this.base_route+"users/:user_id",component:C}),i.a.createElement(m.b,{path:this.base_route+"create_user/",component:S}),i.a.createElement(m.b,{path:this.base_route+"users/",component:T}),i.a.createElement(m.b,{path:this.base_route+"",component:g})))}}]),t}(o.Component);a.d(t,"ca_portal",function(){return J});var J=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth;console.log("gaurd comp"),e.loggedin?"GST"===e.user_type?(alert("You are not CA or admin yet!"),this.props.history.push("/caportal_info")):"CAB"===e.user_type?this.props.history.push("/caportal/ca"):this.props.history.push("/caportal/admin"):(alert("Please login to continue"),this.props.history.push("/caportal_info"))}},{key:"render",value:function(){return i.a.createElement("div",{className:"caportal-wrapper"},i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/caportal/ca",component:O}),i.a.createElement(m.b,{path:"/caportal/admin",component:F})))}}]),t}(o.Component);t.default=Object(u.b)(function(e){return e},p)(J)},52:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(79),r=a.n(n),l=a(36),c="https://ecell.nitrr.ac.in";c="",t.b=function(){var e=null,t=l.store.getState().auth;return t&&(e=t.token),r.a.create({baseURL:c,headers:{Authorization:e,Access:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnQiOiJhbmRyb2lkIiwib3JnYW5pemF0aW9uIjoiRUNlbGwifQ.H2aaDJuOxK44D2kwRCWwv9s5rzJGCNYKT3thtQqN-hQ"}})}},63:function(e,t,a){"use strict";a.r(t),a.d(t,"updateUser",function(){return n});var n=function(e){return function(t){t({type:"update_user",payload:e})}}},66:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={GST:"Guest",VLT:"Voluteer",EXE:"Executive",MNG:"Manager",HCO:"Head Co-ordinator",OCO:"Overall Co-ordinator",CAB:"Campus Ambassador"}}}]);
//# sourceMappingURL=23.ac022984.chunk.js.map
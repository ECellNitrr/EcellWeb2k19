{"version":3,"sources":["Components/iportal/startup/new_opening.js","Components/common/wysiwyg.js"],"names":["new_opening","job_id","Number","_this","props","match","params","state","errors","requesting","success","start_date","apply_by","initial_load","_new_opening","e","preventDefault","setState","url","reqtype","faxios","post","concat","put","startup","auth","startup_id","name","value","stipend","location","no_of_opening","job_type","duration","about_the_job","get_value","skills_required","who_can_apply","perks","then","d","data","console","log","history","goBack","catch","response","_delete_opening","delete","_this2","this","get","set_value","Date","_this3","error_html","Object","keys","forEach","key","map","ele","i","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","style","marginTop","onClick","position","left","transform","type","ref","react_datetime__WEBPACK_IMPORTED_MODULE_10___default","onChange","_common_wysiwyg__WEBPACK_IMPORTED_MODULE_9__","onRef","disabled","Component","connect","summernote","editorState","EditorState","createEmpty","html","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","draftToHtml","convertToRaw","getCurrentContent","react_draft_wysiwyg__WEBPACK_IMPORTED_MODULE_8__","toolbarClassName","wrapperClassName","editorClassName","onEditorStateChange"],"mappings":"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","file":"static/js/43.088587ca.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nimport faxios from '../../../axios'\nimport './dashboard.scss'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Wysiwyg from '../../common/wysiwyg'\nimport Datetime from 'react-datetime'\n\n\nclass new_opening extends Component {\n    job_id = Number(this.props.match.params.job_id)\n\n    state = {\n        errors: {},\n        requesting: false,\n        success: false,\n        start_date: null,\n        apply_by: null,\n        initial_load: true,\n    }\n\n    componentDidMount() {\n        if(!this.job_id){\n            this.setState({initial_load: false})\n            return\n        }\n\n        faxios().get(`/iportal/job/${this.job_id}/`)\n            .then(d => {\n                const data = d.data\n                console.log(data)\n\n                this.name.value = data.name\n                this.stipend.value = data.stipend\n                this.location.value = data.location\n                this.no_of_opening.value = data.no_of_opening\n                this.job_type.value = data.job_type\n                this.duration.value = data.duration\n\n\n                this.about_the_job.set_value(data.about_the_job)\n                this.skills_required.set_value(data.skills_required)\n                this.who_can_apply.set_value(data.who_can_apply)\n                this.perks.set_value(data.perks)\n\n                this.setState({\n                    apply_by: new Date(data.apply_by),\n                    start_date: new Date(data.start_date),\n                    initial_load: false,\n                })\n            })\n    }\n\n    static propTypes = {\n        auth: PropTypes.object.isRequired,\n    }\n\n\n    _new_opening = e => {\n        e.preventDefault()\n\n        this.setState({\n            requesting: false\n        })\n\n        let url = '/iportal/job/'\n        let reqtype = faxios().post\n\n        if (this.job_id) {\n            url = `/iportal/job/${this.job_id}/`\n            reqtype = faxios().put\n        }\n\n        reqtype(url, {\n            \"startup\": this.props.auth.startup_id,\n            \"name\": this.name.value,\n            \"stipend\": this.stipend.value,\n            \"location\": this.location.value,\n            \"no_of_opening\": this.no_of_opening.value,\n            \"job_type\": this.job_type.value,\n            \"duration\": this.duration.value,\n\n            \"apply_by\": this.state.apply_by,\n            \"start_date\": this.state.start_date,\n\n            \"about_the_job\": this.about_the_job.get_value(),\n            \"skills_required\": this.skills_required.get_value(),\n            \"who_can_apply\": this.who_can_apply.get_value(),\n            \"perks\": this.perks.get_value(),\n        }).then(d => {\n            const data = d.data\n            console.log(data)\n            this.props.history.goBack()\n        }).catch(d => {\n            let data = d.response.data\n            console.log(data)\n            this.setState({ errors: data, requesting: false })\n        })\n    }\n\n    _delete_opening = () => {\n        faxios().delete(`/iportal/job/${this.job_id}/`)\n            .then(d=>{\n                this.props.history.goBack()\n            })\n    }\n\n    render() {\n        let error_html = {}\n        Object.keys(this.state.errors).forEach((key) => {\n            error_html[key] = this.state.errors[key].map((ele, i) =>\n                <div key={i} className=\"text-danger\">{ele}</div>\n            )\n        })\n\n        \n\n\n        return (\n                <div className='jumbo container hoverable jumbotron' style={{marginTop:\"\"}}> \n                    <div >\n                        <button \n                            onClick={() => this.props.history.goBack()}\n                            className=\"btn btn-info font-weight-bold\">Go back</button>\n                        <h1 className=\"text-center open font-weight-bold flex-grow-1 my-5\">\n                            {this.job_id ? 'Edit Opening' : 'Create new Opening'}\n                        </h1>\n                        {this.job_id? <button \n                            onClick={this._delete_opening}\n                            className=\"btn btn-danger mb-4 font-weight-bold align-self-center\" style={{position:\"relative\",left:\"50%\",transform:\"translate(-50%,0)\"}}>Delete</button>:null}\n                    </div>\n\n                    {this.state.initial_load ? <div className=\"my-5\">\n                        <h1 className=\"text-center\">\n                            <i className=\"fa fa-spinner fa-spin\"></i>\n                        </h1>\n                    </div> : null}\n\n                    <form>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Opening name</label>\n                            <input type=\"text\" ref={ele => this.name = ele} className=\"form-control\" />\n                            {error_html['name']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Stipend</label>\n                            <input type=\"text\" ref={ele => this.stipend = ele} className=\"form-control\" />\n                            {error_html['stipend']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Location</label>\n                            <input type=\"email\" ref={ele => this.location = ele} className=\"form-control\" />\n                            {error_html['location']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Apply by</label>\n                            <Datetime value={this.state.apply_by} onChange={e => this.setState({ apply_by: e })} />\n                            {error_html['apply_by']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Start Date</label>\n                            <Datetime value={this.state.start_date} onChange={e => this.setState({ start_date: e })} />\n                            {error_html['state_date']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">No of Openings</label>\n                            <input type=\"text\" ref={ele => this.no_of_opening = ele} className=\"form-control\" />\n                            {error_html['no_of_opening']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Duration</label>\n                            <input type=\"text\" ref={ele => this.duration = ele} className=\"form-control\" />\n                            {error_html['duration']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className='mr-2 font-weight-bold d-inline-block'>Job type</label>\n                            <select className=\"form-control\" ref={ele => this.job_type = ele}>\n                                <option value='Internship'>Internship</option>\n                                <option value='Internship with job offer'>Internship with job offer</option>\n                                <option value='Full time employee'>Full time employee</option>\n                                <option value='Parttime'>Part time</option>\n                                <option value='Freelance'>Freelance</option>\n                            </select>\n                            {error_html['job_type']}\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">About the job</label>\n                            {error_html['about_the_job']}\n                            <Wysiwyg onRef={ref => this.about_the_job = ref} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Skills required</label>\n                            {error_html['skills_required']}\n                            <Wysiwyg onRef={ref => this.skills_required = ref} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Who can apply</label>\n                            {error_html['who_can_apply']}\n                            <Wysiwyg onRef={ref => this.who_can_apply = ref} />\n                        </div>\n                        <div className=\"form-group\">\n                            <label className=\"font-weight-bold\">Perks</label>\n                            {error_html['perks']}\n                            <Wysiwyg onRef={ref => this.perks = ref} />\n                        </div>\n\n\n                        <div className=\"text-center\">\n                            <button disabled={this.state.requesting} onClick={this._new_opening} className=\"btn btn-primary font-weight-bold\">{this.state.requesting ? <i className=\"fa fa-spinner fa-spin\"></i> : 'submit'}</button>\n                        </div>\n                    </form>\n\n                </div>\n\n        )\n    }\n}\n\n\n\nconst mapStateToProps = (state) => state\n\nexport default connect(mapStateToProps)(new_opening)\n","import React, { Component } from 'react'\nimport './wysiwyg.scss'\n\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertToRaw, ContentState } from 'draft-js'\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\n\n\nexport default class summernote extends Component {\n  state = {\n    editorState: EditorState.createEmpty()\n  }\n\n  componentDidMount() {\n    this.props.onRef(this)\n  }\n\n  set_value = html => {\n    const contentBlock = htmlToDraft(html);\n    if (contentBlock) {\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n      const editorState = EditorState.createWithContent(contentState);\n      this.setState({editorState})\n    }\n  }\n\n  get_value = () => draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\n\n\n\n  render() {\n    return (\n      <div className=\"wysiwyg\">\n        <Editor\n          editorState={this.state.editorState}\n          toolbarClassName=\"toolbarClassName\"\n          wrapperClassName=\"wrapperClassName\"\n          editorClassName=\"editorClassName\"\n          onEditorStateChange={editorState => this.setState({ editorState })}\n        />\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}
{"version":3,"sources":["axios.js","Components/iportal/jobs/job_application.js","Components/common/wysiwyg.js"],"names":["__webpack_require__","d","__webpack_exports__","baseURL","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","_index__WEBPACK_IMPORTED_MODULE_1__","token","undefined","user","store","getState","auth","loggedin","axios","create","headers","Authorization","Access","job_application","job_id","Number","_this","props","match","params","state","uploading","job_detail","progress","file","_upload_application","e","preventDefault","setState","data","FormData","request","XMLHttpRequest","append","resume","files","ques1","get_value","ques2","id","addEventListener","JSON","parse","target","response","history","goBack","error","upload","Math","round","loaded","total","console","log","open","setRequestHeader","send","_this2","this","faxios","get","concat","then","res","_this3","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","onClick","style","paddingTop","name","job_type","ref","ele","type","react__WEBPACK_IMPORTED_MODULE_5__","class","role","width","height","aria-valuemin","aria-valuemax","_common_wysiwyg__WEBPACK_IMPORTED_MODULE_9__","onRef","disabled","Component","connect","actions","summernote","editorState","EditorState","createEmpty","set_value","html","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","draftToHtml","convertToRaw","getCurrentContent","react_draft_wysiwyg__WEBPACK_IMPORTED_MODULE_8__","toolbarClassName","wrapperClassName","editorClassName","onEditorStateChange"],"mappings":"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","file":"static/js/37.6ee0798a.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { store } from './index'\r\n\r\n\r\n// export let baseURL =\"https://ecell.nitrr.ac.in\";\r\nexport let baseURL =\"http://localhost:8000\";\r\n\r\n    \r\nif (process.env.NODE_ENV === 'production') {\r\n    baseURL = \"\"\r\n}\r\n\r\n\r\nexport default () => {\r\n    let token = undefined\r\n    let accessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnQiOiJhbmRyb2lkIiwib3JnYW5pemF0aW9uIjoiRUNlbGwifQ.H2aaDJuOxK44D2kwRCWwv9s5rzJGCNYKT3thtQqN-hQ';\r\n    const user = store.getState().auth\r\n\r\n    \r\n    if (user) {\r\n        // console.log({user})\r\n        token = user.loggedin ? user.token : undefined\r\n    }\r\n    return axios.create({\r\n        baseURL,\r\n        headers: {\r\n            Authorization: token,\r\n            Access: accessToken\r\n\r\n        }\r\n    });\r\n};\r\n","import React, { Component, Fragment } from 'react'\r\nimport faxios, { baseURL } from '../.././../axios'\r\n\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport * as actions from '../../../actions/authActions'\r\nimport Wysiwyg from '../../common/wysiwyg'\r\n\r\n\r\nclass job_application extends Component {\r\n    job_id = Number(this.props.match.params.job_id)\r\n\r\n    state = {\r\n        uploading: false,\r\n        job_detail: {},\r\n        progress: 0,\r\n        file: null,\r\n    }\r\n\r\n    static propTypes = {\r\n        auth: PropTypes.object.isRequired,\r\n        updateUser: PropTypes.func.isRequired,\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        \r\n        faxios().get(`/iportal/job/${this.job_id}/`).then(res => {\r\n\r\n            let data = res.data\r\n            console.log(data)\r\n            this.setState({\r\n                job_detail: data\r\n            })\r\n        })\r\n    }\r\n\r\n    _upload_application = (e) => {\r\n        e.preventDefault()\r\n        this.setState({\r\n            uploading: true\r\n        })\r\n\r\n        var data = new FormData();\r\n        var request = new XMLHttpRequest();\r\n\r\n\r\n        data.append('resume', this.resume.files[0])\r\n        data.append('ques1', this.ques1.get_value())\r\n        data.append('ques2', this.ques2.get_value())\r\n        data.append('job', this.job_id)\r\n        data.append('applicant', this.props.auth.id)\r\n\r\n\r\n        // load event\r\n        request.addEventListener('load', (e) => {\r\n            const data = JSON.parse(e.target.response)\r\n\r\n            this.setState({\r\n                uploading: false,\r\n                progress: 0\r\n            })\r\n\r\n            if(data.id){\r\n                this.props.history.goBack()\r\n            }else{\r\n                this.setState({error:true})\r\n            }\r\n        });\r\n\r\n        // monitor progress of upload\r\n        request.upload.addEventListener('progress', (e) => {\r\n            var progress = Math.round((e.loaded / e.total) * 100)\r\n            console.log({ progress })\r\n\r\n            this.setState({ progress })\r\n        })\r\n\r\n\r\n\r\n        request.open('post', baseURL + '/iportal/job_application/');\r\n        request.setRequestHeader('Authorization', this.props.auth.token)\r\n        request.send(data);\r\n        this.setState({ uploading: false })\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className='container jumbotron'>\r\n\r\n                    <div>\r\n                        <button onClick={() => this.props.history.goBack()} className=\"btn align-self-center font-weight-bold btn-primary\">Go Back</button>\r\n                    </div>\r\n\r\n                    <h1 className=\"mt-5 jb_app font-weight-bold text-center\" style={{paddingTop:\"-40px\"}}>Job Application</h1>\r\n                    <h2 className=\"mt-4 jb_apps font-weight-bold text-center\">{this.state.job_detail.name} ({this.state.job_detail.job_type})</h2>\r\n\r\n                    <div className=\"text-center font-weight-bold my-5\">\r\n                        Upload your Resume : <input className=\"btn btn-success text-center font-weight-bold\" ref={ele => this.resume = ele} type=\"file\" /> <span className=\"font-weight-bold\">{this.state.progress? `${this.state.progress}%`:null}</span>   \r\n                    </div>\r\n\r\n                    {this.state.uploading ?\r\n                        <span>\r\n                            {this.state.progress ? <Fragment>\r\n                                <div class=\"progress md-progress\" style=\"height: 20px\">\r\n                                    <div class=\"progress-bar\" role=\"progressbar\" style={{ width: `${this.state.progress}%`, height: \"20px\" }} aria-valuemin=\"0\" aria-valuemax=\"100\">{this.state.progress}%</div>\r\n                                </div>\r\n                            </Fragment> : null}\r\n                        </span>\r\n                        :\r\n                        null}\r\n\r\n                    <div className=\"font-weight-bold my-4\">How you are suitable for this job?</div>\r\n                    <Wysiwyg onRef={ele => this.ques1 = ele} />\r\n\r\n                    <div className=\"font-weight-bold my-4\">During what timeframe you are available for the job?</div>\r\n                    <Wysiwyg onRef={ele => this.ques2 = ele} />\r\n\r\n                    <div className=\"text-center\">\r\n                        <div className=\"text center text-danger\">\r\n                            {this.state.error? 'Please ensure that all questions are answered and resume file selected for upload.':null}\r\n                        </div>\r\n                        <button onClick={this._upload_application} disabled={this.state.uploading} type=\"submit\" className=\"btn font-weight-bold my-4 btn-primary\">{this.state.uploading ? 'Uploading' : 'Submit'}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => state\r\nexport default connect(mapStateToProps, actions)(job_application)","import React, { Component } from 'react'\r\nimport './wysiwyg.scss'\r\n\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport { EditorState, convertToRaw, ContentState } from 'draft-js'\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\n\r\n\r\n\r\nexport default class summernote extends Component {\r\n  state = {\r\n    editorState: EditorState.createEmpty()\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.onRef(this)\r\n  }\r\n\r\n  set_value = html => {\r\n    const contentBlock = htmlToDraft(html);\r\n    if (contentBlock) {\r\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\r\n      const editorState = EditorState.createWithContent(contentState);\r\n      this.setState({editorState})\r\n    }\r\n  }\r\n\r\n  get_value = () => draftToHtml(convertToRaw(this.state.editorState.getCurrentContent()))\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"wysiwyg\">\r\n        <Editor\r\n          editorState={this.state.editorState}\r\n          toolbarClassName=\"toolbarClassName\"\r\n          wrapperClassName=\"wrapperClassName\"\r\n          editorClassName=\"editorClassName\"\r\n          onEditorStateChange={editorState => this.setState({ editorState })}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}